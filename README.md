# ERA Padel League — турнирные таблицы сезона

Одностраничный сайт для публикации прогресса сезона ERA Padel League: турнирные таблицы по вкладкам Gold, Silver, Ladies, Mix, история матчей и автоматический пересчёт очков/рейтинга.

## Как запустить локально

1. Откройте `index.html` напрямую в браузере **или** поднимите любой статический сервер:
   ```bash
   python -m http.server
   ```
2. Перейдите по адресу из консоли (по умолчанию `http://localhost:8000`).

## Структура проекта

- `index.html` — каркас страницы и контейнеры для динамического контента.
- `styles/main.css` — оформление и адаптивные стили.
- `scripts/main.js` — загрузка данных, расчёт таблиц, рендер истории матчей.
- `data/divisions.json` — описание сезона, команд и результатов.
- `images/` — при желании можно хранить фото команд/клубов (необязательно для таблиц).

## Формат данных (`data/divisions.json`)

- Название команды формируется из имён и фамилий игроков, соединённых тире (например, `Иван Иванов - Пётр Петров`).
- Информацию о клубах добавляйте по желанию — расчёты на поле `club` не завязаны.
- Матчи планируются по неделям, поэтому заполняйте `round` для каждой встречи (включая запланированные).

```jsonc
{
  "season": {
    "title": "ERA Padel League — Сезон 1",
    "subtitle": "Октябрь 2025",
    "updatedAt": "2025-10-18"
  },
  "divisions": [
    {
      "id": "gold",
      "title": "Gold дивизион",
      "groups": [
        {
          "id": "gold-alpha",
          "label": "Группа Alpha",
          "teams": [
            { "id": "Алексей Петров - Глеб Соколов", "name": "Алексей Петров - Глеб Соколов", "players": ["Алексей Петров", "Глеб Соколов"] },
            { "id": "Иван Смирнов - Пётр Лебедев", "name": "Иван Смирнов - Пётр Лебедев", "players": ["Иван Смирнов", "Пётр Лебедев"] }
          ],
          "matches": [
            {
              "id": "gold-alpha-001",
              "round": 1,
              "home": "Алексей Петров - Глеб Соколов",
              "away": "Иван Смирнов - Пётр Лебедев",
              "date": "2025-10-05",
              "result": {
                "status": "played",
                "winner": "home",
                "sets": [
                  { "home": 6, "away": 4 },
                  { "home": 6, "away": 3 }
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
```

> При необходимости можно расширить корневой объект полем `rules` (по умолчанию берутся значения из регламента страницы).

### Поля матчей

- `home` / `away`: идентификаторы команд; используйте то же значение, что и в `teams.id` (обычно совпадает с названием).
- `round`: неделя сезона (целое число или строка), необходима для планирования.
- `date`: `YYYY-MM-DD` — указывайте только для состоявшихся матчей (`played`, `wo`).
- `status`: `"played"`, `"scheduled"` или `"wo"` (техническая победа).
- `winner`: `"home"` или `"away"` (для `played` и `wo`). Если не указать, победитель вычислится по сетам.
- `sets`: массив сетов. Матч играется до двух побед по сетам; в каждом сете при счёте 6:6 проводится тай-брейк до 7 с преимуществом в 2 очка (укажите итоговый счёт, например, `7:6`).
- `reason`: необязательный текст, который попадает в карточку матча (например, "Перенос из-за дождя").

### Примеры результатов

**Обычный матч 2:1**
```jsonc
{
  "id": "baseline-alpha-007",
  "round": 4,
  "home": "Роман Щербаков - Дмитрий Литвиненко",
  "away": "Егор Пластов - Иван Гущин",
  "date": "2025-10-28",
  "result": {
    "status": "played",
    "winner": "away",
    "sets": [
      { "home": 6, "away": 4 },
      { "home": 3, "away": 6 },
      { "home": 6, "away": 7 }
    ]
  }
}
```

**Матч в расписании**
```jsonc
{
  "id": "baseline-alpha-008",
  "round": 5,
  "home": "Алексей Петров - Глеб Соколов",
  "away": "Егор Пластов - Иван Гущин",
  "result": { "status": "scheduled" }
}
```

**Техническое поражение**
```jsonc
{
  "id": "baseline-beta-005",
  "round": 5,
  "home": "Андрей Нестеров - Владимир Сапсанов",
  "away": "Игорь Надеждин - Владимир Коренев",
  "date": "2025-10-30",
  "result": {
    "status": "wo",
    "winner": "home",
    "reason": "Техническая победа: соперник не явился"
  }
}
```

## Как обновлять турнир

1. В `data/divisions.json` поменяйте дату `season.updatedAt`, чтобы страница показала свежий штамп.
2. Найдите нужную вкладку/дивизион (`divisions[x]`, например `gold`, `silver`, `ladies`, `mix`), затем нужную группу внутри (`groups[y]`).
3. Добавьте новую запись в массив `matches` **или** обновите существующую (по `id`).
4. При необходимости скорректируйте список `teams` (названия в формате `Имя Фамилия - Имя Фамилия`, составы, клубы при желании).

После сохранения перезагрузите страницу — таблицы, очки, разница сетов/геймов и рейтинг автоматически пересчитаются. История матчей обновляется в хронологическом порядке (по дате, затем по `id`).

### Быстрый шаблон для добавления матча

Скопируйте блок ниже и подставьте свои значения:
```jsonc
{
  "id": "group-id-###",
  "round": 1,
  // Добавьте `date`, только если матч уже сыгран
  "date": "YYYY-MM-DD",
  "home": "Имя Фамилия - Имя Фамилия",
  "away": "Имя Фамилия - Имя Фамилия",
  "result": {
    "status": "played",
    "winner": "home",
    "sets": [
      { "home": 6, "away": 4 },
      { "home": 6, "away": 3 }
    ]
  }
}
```

> Примечание. Порядок матчей в JSON влияет на расчёт рейтинга: скрипт обрабатывает их сверху вниз (по дате, затем по порядку `round`). Если матч переносится, просто скорректируйте дату и статус.

## Развёртывание на GitHub Pages

1. Обновите репозиторий и залейте изменения в ветку, из которой публикуется GitHub Pages (`main` или `gh-pages`).
2. Проверьте, что опция GitHub Pages настроена на `index.html` в корне или в каталоге `docs/` (если используется другая схема, обновите пути).
3. После деплоя просто обновите страницу — новые результаты подтянутся автоматически.

## Подсказки по ведению сезона

- Для команд можно хранить дополнительные поля (`club`, `coach`, `social`) — они никак не ломают расчёты.
- Если хотите хранить заметки или видео по матчу, добавьте поля `note`, `links` в объект `result` — скрипт аккуратно покажет их под карточкой.
- При большом объёме данных удобно вести результаты в Google Sheets, а затем экспортировать участок в JSON (формат совпадает). Главное — оставить идентификаторы команд и матчей.

Если нужна автоматизация (например, скрипт для добавления результатов из CSV), добавьте задачу в TODO — каркас под расширение уже готов.
